document.addEventListener('DOMContentLoaded', function() {
    // Handle the login form submission
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
        loginForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission
            const username = document.getElementById('username').value;

            // Simple front-end validation
            if (!username) {
                alert('Please enter your username.');
                return;
            }

            // Submit the form using Fetch API
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `username=${encodeURIComponent(username)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/dashboard'; // Redirect to dashboard if successful
                } else {
                    alert(data.message); // Show error message from server
                }
            })
            .catch(error => console.error('Error:', error));
        });
    }

    // Display welcome message on the dashboard
    const userDisplay = document.getElementById('user-display');
    if (userDisplay) {
        const username = userDisplay.getAttribute('data-username');
        userDisplay.textContent = `Welcome, ${username}!`;
    }
});
